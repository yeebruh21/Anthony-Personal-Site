<!DOCTYPE html>
<html>
    <head><meta charset = "UTF-8">
        <meta name = "viewport" content = "width=device-width, initial-scale = 1.0">
        <meta http-equiv = "X-UA-Compatible" content = "ie=edge">
        <title>Chess</title>

        <link rel = "stylesheet" href="Personal site.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Convergence&family=Lato&family=Roboto:wght@300;400&display=swap" rel="stylesheet">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js">
        </script>
    </head>

    <body class = "main-background">
        <div class = "background-animation">
            <div class = "square" style = "--i:0;"></div>
            <div class = "square" style = "--i:1;"></div>
            <div class = "square" style = "--i:2;"></div>
            <div class = "square" style = "--i:3;"></div>
            <div class = "square" style = "--i:4;"></div>
            <div class = "square" style = "--i:5;"></div>
            <div class = "square" style = "--i:6;"></div>
            <div class = "square" style = "--i:7;"></div>
        </div>

        <div class = "menu-container">
            <!-- button that expands menu -->
            <div class = "hamburger" onclick = "toggle()">
                <span class = "bar"></span>
                <span class = "bar"></span>
                <span class = "bar"></span>
            </div>
            
            <div class = "button-group-container">
                <button class = "button1" id = "b1" onclick = "location.href = 'file:///C:/Users/achen/OneDrive/Desktop/Web%20dev/Personal%20site.html#home';">Home</button>
                <button class = "button2" id = "b2" onclick = "location.href = 'file:///C:/Users/achen/OneDrive/Desktop/Web%20dev/Personal%20site.html#about-me';">About Me</button>
                <button class = "button3" id = "b3" onclick = "location.href='file:///C:/Users/achen/OneDrive/Desktop/Web%20dev/Personal%20site.html#experience';">Experience</button>
                <button class = "button4" id = "b4" onclick = "location.href = 'file:///C:/Users/achen/OneDrive/Desktop/Web%20dev/Personal%20site.html#projects';">Projects</button>
                <button class = "button5" id = "b5" onclick = "location.href = 'file:///C:/Users/achen/OneDrive/Desktop/Web%20dev/Resume.html';">Resume</button>
                <button class = "button6" id = "b6" onclick = "location.href = 'file:///C:/Users/achen/OneDrive/Desktop/Web%20dev/Chess.html';">Chess</button>
                <button class = "button7" id = "b7" onclick = "location.href = 'file:///C:/Users/achen/OneDrive/Desktop/Web%20dev/Literature.html';">Literature</button>
                <button class = "button8" id = "b8" onclick = "location.href = 'file:///C:/Users/achen/OneDrive/Desktop/Web%20dev/Contact%20Me.html';">Contact Me</button>
            </div>
        </div>

        <div class = "chess-title">
            Chess
        </div>

        <div class = "chess-container1">
            <div class = "chess-text1">

            </div>
            <div class = "highlight-game">

            </div>
        </div>

        <div class = "chess-subtitle">
            Stats
        </div>

        <canvas class = "chart" id="line-chart" width="550" height="450">
        </canvas>

        <script>

            getData();
    
            async function getData() {
                const response = await fetch(
    'https://lichess.org/api/user/yeebruh21/rating-history');
                console.log(response);
                const data = await response.json();
                console.log(data);
                length = data[2].points.length;
                console.log(length);
    
                labels = [];
                values = [];
                for (i = 0; i < length; i++) {
                    labels.push(data[2].points[i][0] + "-" + (data[2].points[i][1]+1) + "-" + data[2].points[i][2]);
                    values.push(data[2].points[i][3]);
                }
    
                new Chart(document.getElementById("line-chart"), {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: "Rating",
                                data: values,
                                borderColor: '#5bb0ad',
                                backgroundColor: 'rgba(129, 171, 169, 0.2)'
                            }
                        ]
                    },
                    options: {
                        legend: { 
                            display: false,
                            labels: {
                                fontSize: 22
                            }
                        },
                        title: {
                            display: true
                        },
                        scales: {
                            yAxes: [{
                                ticks: {
                                    fontSize: 25
                                }
                            }],
                            xAxes: [{
                                ticks: {
                                    fontSize: 20
                                }
                            }]
                        },
                        elements: {
                            point: {
                                radius: 1,
                                hitRadius: 4
                            }
                        }
                    }
                });
    
            }
    
        </script>

        <div class = "stats-container">
            <div class = "chess-container2">
                <div class = "improvement-log">

                </div>

                <div class = "chess-text2">
                    <p id = "user"></p>
                    <p id = "blitz-rating"></p>
                    <p id = "rapid-rating"></p>
                    <p id = "total-blitz"></p>
                </div>
            </div>
        </div>

        <!--<iframe id="9804765" allowtransparency="true" frameborder="0" style="width:100%;border:none;" src="//www.chess.com/emboard?id=9804765"></iframe><script>window.addEventListener("message",e=>{e['data']&&"9804765"===e['data']['id']&&document.getElementById(`${e['data']['id']}`)&&(document.getElementById(`${e['data']['id']}`).style.height=`${e['data']['frameHeight']+30}px`)});</script>
        -->

        <script src = "Personal site.js"></script>
        <script>
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                var myObj = JSON.parse(this.responseText);
                document.getElementById("user").innerHTML = myObj.id;
                document.getElementById("blitz-rating").innerHTML = myObj.perfs.blitz.rating;
                document.getElementById("rapid-rating").innerHTML = myObj.perfs.rapid.rating;
                document.getElementById("total-blitz").innerHTML = "Games: " + myObj.perfs.blitz.games;
            }
            };
            xmlhttp.open("GET", "https://lichess.org/api/user/yeebruh21");
            xmlhttp.send();
        </script>
    </body>
</html>